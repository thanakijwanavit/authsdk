---

title: Cognito


keywords: fastai
sidebar: home_sidebar

summary: "cognito sdk"
description: "cognito sdk"
nb_path: "cognito.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: cognito.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Auth">Auth<a class="anchor-link" href="#Auth"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Cognito" class="doc_header"><code>class</code> <code>Cognito</code><a href="https://github.com/thanakijwanavit/pynamologger/tree/master/villaAuth/cognito.py#L17" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Cognito</code>(<strong><code>identityPoolId</code></strong>, <strong><code>userPoolId</code></strong>, <strong><code>accountId</code></strong>, <strong><code>clientId</code></strong>, <strong><code>clientSecret</code></strong>, <strong><code>region</code></strong>=<em><code>'ap-southeast-1'</code></em>)</p>
</blockquote>

<pre><code>sdk to interact with cognito as a client</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="credenFromIdToken" class="doc_header"><code>credenFromIdToken</code><a href="https://github.com/thanakijwanavit/pynamologger/tree/master/villaAuth/cognito.py#L39" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>credenFromIdToken</code>(<strong><code>logins</code></strong>)</p>
</blockquote>

<pre><code>get aws credentials from cognito token</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="login" class="doc_header"><code>login</code><a href="https://github.com/thanakijwanavit/pynamologger/tree/master/villaAuth/cognito.py#L58" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>login</code>(<strong><code>user</code></strong>:<code>str</code>, <strong><code>pw</code></strong>:<code>str</code>, <strong>*<code>args</code></strong>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>

<pre><code>login to pool using cognito</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="loginWithFb" class="doc_header"><code>loginWithFb</code><a href="https://github.com/thanakijwanavit/pynamologger/tree/master/villaAuth/cognito.py#L91" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>loginWithFb</code>(<strong><code>fbKey</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># cognito.loginWithFb(fbToken)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="create-a-new-user">create a new user<a class="anchor-link" href="#create-a-new-user"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="addUser" class="doc_header"><code>addUser</code><a href="https://github.com/thanakijwanavit/pynamologger/tree/master/villaAuth/cognito.py#L101" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>addUser</code>(<strong><code>user</code></strong>, <strong><code>phone</code></strong>, <strong><code>pw</code></strong>, <strong><code>name</code></strong>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">cognito</span> <span class="o">=</span> <span class="n">Cognito</span><span class="p">(</span>
  <span class="n">identityPoolId</span> <span class="o">=</span> <span class="n">identity_pool_id</span> <span class="p">,</span>
  <span class="n">userPoolId</span> <span class="o">=</span> <span class="n">user_pool_id</span><span class="p">,</span>
  <span class="n">accountId</span> <span class="o">=</span> <span class="n">account_id</span><span class="p">,</span>
  <span class="n">clientId</span> <span class="o">=</span> <span class="n">client_id</span><span class="p">,</span>
  <span class="n">clientSecret</span> <span class="o">=</span> <span class="n">client_secret</span><span class="p">,</span>
  <span class="n">region</span> <span class="o">=</span> <span class="s1">&#39;ap-southeast-1&#39;</span>
<span class="p">)</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">cognito</span><span class="o">.</span><span class="n">addUser</span><span class="p">(</span><span class="n">user</span> <span class="o">=</span> <span class="n">user</span><span class="p">,</span> <span class="n">phone</span> <span class="o">=</span> <span class="n">phone</span><span class="p">,</span>  <span class="n">pw</span> <span class="o">=</span> <span class="n">pw</span><span class="p">,</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;nic&#39;</span><span class="p">)</span>
<span class="n">result</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;success&#39;: False,
 &#39;error&#39;: botocore.errorfactory.UsernameExistsException(&#39;An error occurred (UsernameExistsException) when calling the SignUp operation: User already exists&#39;),
 &#39;traceback&#39;: &#39;Traceback (most recent call last):\n  File &#34;&lt;ipython-input-10-2459b5929127&gt;&#34;, line 12, in addUser\n    u.register(user , pw)\n  File &#34;/home/ec2-user/anaconda3/envs/python38/lib/python3.8/site-packages/pycognito/__init__.py&#34;, line 349, in register\n    response = self.client.sign_up(**params)\n  File &#34;/home/ec2-user/anaconda3/envs/python38/lib/python3.8/site-packages/botocore/client.py&#34;, line 337, in _api_call\n    return self._make_api_call(operation_name, kwargs)\n  File &#34;/home/ec2-user/anaconda3/envs/python38/lib/python3.8/site-packages/botocore/client.py&#34;, line 656, in _make_api_call\n    raise error_class(parsed_response, operation_name)\nbotocore.errorfactory.UsernameExistsException: An error occurred (UsernameExistsException) when calling the SignUp operation: User already exists\n&#39;}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="confirm">confirm<a class="anchor-link" href="#confirm"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="confirm" class="doc_header"><code>confirm</code><a href="https://github.com/thanakijwanavit/pynamologger/tree/master/villaAuth/cognito.py#L118" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>confirm</code>(<strong><code>user</code></strong>, <strong><code>code</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">cognito</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="n">user</span> <span class="o">=</span> <span class="s1">&#39;1234&#39;</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="s1">&#39;931114&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;success&#39;: False,
 &#39;error&#39;: botocore.errorfactory.ExpiredCodeException(&#39;An error occurred (ExpiredCodeException) when calling the ConfirmSignUp operation: Invalid code provided, please request a code again.&#39;),
 &#39;traceback&#39;: &#39;Traceback (most recent call last):\n  File &#34;&lt;ipython-input-12-075770528484&gt;&#34;, line 11, in confirm\n    result = u.confirm_sign_up(code ,username=user)\n  File &#34;/home/ec2-user/anaconda3/envs/python38/lib/python3.8/site-packages/pycognito/__init__.py&#34;, line 386, in confirm_sign_up\n    self.client.confirm_sign_up(**params)\n  File &#34;/home/ec2-user/anaconda3/envs/python38/lib/python3.8/site-packages/botocore/client.py&#34;, line 337, in _api_call\n    return self._make_api_call(operation_name, kwargs)\n  File &#34;/home/ec2-user/anaconda3/envs/python38/lib/python3.8/site-packages/botocore/client.py&#34;, line 656, in _make_api_call\n    raise error_class(parsed_response, operation_name)\nbotocore.errorfactory.ExpiredCodeException: An error occurred (ExpiredCodeException) when calling the ConfirmSignUp operation: Invalid code provided, please request a code again.\n&#39;}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="updateProfile">updateProfile<a class="anchor-link" href="#updateProfile"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="update" class="doc_header"><code>update</code><a href="https://github.com/thanakijwanavit/pynamologger/tree/master/villaAuth/cognito.py#L134" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>update</code>(<strong><code>user</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">domain</span> <span class="o">=</span> <span class="s1">&#39;villaemployee.auth.ap-southeast-1.amazoncognito.com&#39;</span>
<span class="n">clientId</span> <span class="o">=</span> <span class="s1">&#39;49g3q8l6qca6gj5br83ubcd2af&#39;</span>
<span class="n">redirectUrl</span> <span class="o">=</span> <span class="s1">&#39;https://google.com&#39;</span>
<span class="sa">f</span><span class="s1">&#39;https://</span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s1">/login?response_type=code&amp;client_id=</span><span class="si">{</span><span class="n">clientId</span><span class="si">}</span><span class="s1">&amp;redirect_uri=</span><span class="si">{</span><span class="n">redirectUrl</span><span class="si">}</span><span class="s1">&#39;</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;https://villaemployee.auth.ap-southeast-1.amazoncognito.com/login?response_type=code&amp;client_id=49g3q8l6qca6gj5br83ubcd2af&amp;redirect_uri=https://google.com&#39;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="sa">f</span><span class="s1">&#39;https://</span><span class="si">{</span><span class="n">domain</span><span class="si">}</span><span class="s1">/confirm?response_type=code&amp;client_id=</span><span class="si">{</span><span class="n">clientId</span><span class="si">}</span><span class="s1">&amp;redirect_uri=</span><span class="si">{</span><span class="n">redirectUrl</span><span class="si">}</span><span class="s1">&#39;</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;https://villaemployee.auth.ap-southeast-1.amazoncognito.com/confirm?response_type=code&amp;client_id=49g3q8l6qca6gj5br83ubcd2af&amp;redirect_uri=https://google.com&#39;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="unauth" class="doc_header"><code>unauth</code><a href="https://github.com/thanakijwanavit/pynamologger/tree/master/villaAuth/cognito.py#L147" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>unauth</code>(<strong>*<code>args</code></strong>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>

<pre><code>login to pool using cognito</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">Cognito</span><span class="p">()</span>
<span class="n">cognito</span> <span class="o">=</span> <span class="n">Cognito</span><span class="p">(</span>
 <span class="n">identityPoolId</span> <span class="o">=</span> <span class="n">identity_pool_id</span> <span class="p">,</span>
 <span class="n">userPoolId</span> <span class="o">=</span> <span class="n">user_pool_id</span><span class="p">,</span>
 <span class="n">accountId</span> <span class="o">=</span> <span class="n">account_id</span><span class="p">,</span>
 <span class="n">clientId</span> <span class="o">=</span> <span class="n">client_id</span><span class="p">,</span>
 <span class="n">clientSecret</span> <span class="o">=</span> <span class="n">client_secret</span><span class="p">,</span>
 <span class="n">region</span> <span class="o">=</span> <span class="s1">&#39;ap-southeast-1&#39;</span>
<span class="p">)</span>
<span class="n">cognito</span><span class="o">.</span><span class="n">unauth</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">TypeError</span>                                 Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-21-6a320a26c473&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>Cognito<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span> cognito = Cognito(
<span class="ansi-green-intense-fg ansi-bold">      3</span>  identityPoolId <span class="ansi-blue-fg">=</span> identity_pool_id <span class="ansi-blue-fg">,</span>
<span class="ansi-green-intense-fg ansi-bold">      4</span>  userPoolId <span class="ansi-blue-fg">=</span> user_pool_id<span class="ansi-blue-fg">,</span>
<span class="ansi-green-intense-fg ansi-bold">      5</span>  accountId <span class="ansi-blue-fg">=</span> account_id<span class="ansi-blue-fg">,</span>

<span class="ansi-red-fg">TypeError</span>: __init__() missing 5 required positional arguments: &#39;identityPoolId&#39;, &#39;userPoolId&#39;, &#39;accountId&#39;, &#39;clientId&#39;, and &#39;clientSecret&#39;</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

